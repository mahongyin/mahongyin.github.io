<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>kotlin-进阶 | konng</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.d3f21bfd.css" as="style"><link rel="preload" href="/assets/js/app.dd7f87c0.js" as="script"><link rel="preload" href="/assets/js/9.31128199.js" as="script"><link rel="preload" href="/assets/js/40.746079fe.js" as="script"><link rel="preload" href="/assets/js/7.d59aec22.js" as="script"><link rel="prefetch" href="/assets/js/1.118e1072.js"><link rel="prefetch" href="/assets/js/10.c8dda1c7.js"><link rel="prefetch" href="/assets/js/11.23a503d8.js"><link rel="prefetch" href="/assets/js/12.1da34407.js"><link rel="prefetch" href="/assets/js/13.0c7658b1.js"><link rel="prefetch" href="/assets/js/14.58091560.js"><link rel="prefetch" href="/assets/js/15.0ba62277.js"><link rel="prefetch" href="/assets/js/16.8c40bd03.js"><link rel="prefetch" href="/assets/js/17.9718c0dd.js"><link rel="prefetch" href="/assets/js/18.4295a7c2.js"><link rel="prefetch" href="/assets/js/19.e5299494.js"><link rel="prefetch" href="/assets/js/20.1a6daa27.js"><link rel="prefetch" href="/assets/js/21.abc54b0d.js"><link rel="prefetch" href="/assets/js/22.3dae1886.js"><link rel="prefetch" href="/assets/js/23.0fa98fed.js"><link rel="prefetch" href="/assets/js/24.b778858a.js"><link rel="prefetch" href="/assets/js/25.04a97041.js"><link rel="prefetch" href="/assets/js/26.657eae4e.js"><link rel="prefetch" href="/assets/js/27.53e343ef.js"><link rel="prefetch" href="/assets/js/28.7ceab2db.js"><link rel="prefetch" href="/assets/js/29.20eefe07.js"><link rel="prefetch" href="/assets/js/30.c2ff9ffa.js"><link rel="prefetch" href="/assets/js/31.7959298b.js"><link rel="prefetch" href="/assets/js/32.15b39cde.js"><link rel="prefetch" href="/assets/js/33.9f9c0485.js"><link rel="prefetch" href="/assets/js/34.91b45a31.js"><link rel="prefetch" href="/assets/js/35.1b62c37a.js"><link rel="prefetch" href="/assets/js/36.836c22cc.js"><link rel="prefetch" href="/assets/js/37.1e3621fa.js"><link rel="prefetch" href="/assets/js/38.a45fa955.js"><link rel="prefetch" href="/assets/js/39.7d6ecf4f.js"><link rel="prefetch" href="/assets/js/4.b6845c9f.js"><link rel="prefetch" href="/assets/js/41.88b6d7ea.js"><link rel="prefetch" href="/assets/js/42.a8211748.js"><link rel="prefetch" href="/assets/js/43.54530cad.js"><link rel="prefetch" href="/assets/js/44.8c4d6ffc.js"><link rel="prefetch" href="/assets/js/45.d90360d4.js"><link rel="prefetch" href="/assets/js/46.66e2553b.js"><link rel="prefetch" href="/assets/js/47.7a8d6d6a.js"><link rel="prefetch" href="/assets/js/48.dd759600.js"><link rel="prefetch" href="/assets/js/49.62dda34d.js"><link rel="prefetch" href="/assets/js/5.1b790204.js"><link rel="prefetch" href="/assets/js/50.cd9f7f3e.js"><link rel="prefetch" href="/assets/js/51.426c26a3.js"><link rel="prefetch" href="/assets/js/52.c26c6095.js"><link rel="prefetch" href="/assets/js/53.1c7fb7a3.js"><link rel="prefetch" href="/assets/js/54.c457fbbb.js"><link rel="prefetch" href="/assets/js/55.f4870c89.js"><link rel="prefetch" href="/assets/js/56.0b80ab57.js"><link rel="prefetch" href="/assets/js/57.15d0b2b9.js"><link rel="prefetch" href="/assets/js/58.6b7f9285.js"><link rel="prefetch" href="/assets/js/59.6a95192e.js"><link rel="prefetch" href="/assets/js/6.4382cfba.js"><link rel="prefetch" href="/assets/js/60.73466548.js"><link rel="prefetch" href="/assets/js/61.6f07e2b5.js"><link rel="prefetch" href="/assets/js/62.5da19f2f.js"><link rel="prefetch" href="/assets/js/63.e7ae0b76.js"><link rel="prefetch" href="/assets/js/64.942e156c.js"><link rel="prefetch" href="/assets/js/65.0269ff5c.js"><link rel="prefetch" href="/assets/js/66.81138f05.js"><link rel="prefetch" href="/assets/js/67.b1feb7fc.js"><link rel="prefetch" href="/assets/js/68.2001d75d.js"><link rel="prefetch" href="/assets/js/69.fd7fcefc.js"><link rel="prefetch" href="/assets/js/70.ffbcd6d1.js"><link rel="prefetch" href="/assets/js/71.7d297446.js"><link rel="prefetch" href="/assets/js/72.fca7d1e2.js"><link rel="prefetch" href="/assets/js/73.08eacd75.js"><link rel="prefetch" href="/assets/js/74.119a731d.js"><link rel="prefetch" href="/assets/js/75.a73771c0.js"><link rel="prefetch" href="/assets/js/76.1a5a46e7.js"><link rel="prefetch" href="/assets/js/77.b5a2d4f4.js"><link rel="prefetch" href="/assets/js/78.786784a1.js"><link rel="prefetch" href="/assets/js/79.34b505aa.js"><link rel="prefetch" href="/assets/js/8.286fc710.js"><link rel="prefetch" href="/assets/js/80.fc7a538e.js"><link rel="prefetch" href="/assets/js/81.ef1338a8.js"><link rel="prefetch" href="/assets/js/82.ba916f03.js"><link rel="prefetch" href="/assets/js/83.f4828bf6.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.e25e154a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d3f21bfd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://pic1.zhimg.com/v2-977206e6259e3cc522db559414843524_r.jpg);" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          konng
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/" class="navbar-link" data-v-e4145d0a>
            home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            tags
          </a><a href="/About/" class="navbar-link" data-v-e4145d0a>
            about
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          kotlin-进阶
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      Created : 2020-12-19
    </span> <span class="update-date" data-v-4e23451f>
      Updated : 2021-03-17
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/12/16/_01-kotlin-basic-syntax.html" class="post-link" data-v-4e23451f>
      Previous Post : kotlin-basic-syntax
    </a> <a href="/posts/2020/12/19/npm%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85%E5%90%8E%E4%BB%8D%E7%84%B6%E6%8F%90%E7%A4%BA%E6%89%BE%E4%B8%8D%E5%88%B0%E5%91%BD%E4%BB%A4.html" class="post-link" data-v-4e23451f>
      Next Post : windows npm 全局安装后仍然提示找不到命令
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><blockquote><p>🌴 kotlin02: 空安全 递归 异常 尾递归</p></blockquote> <h2 id="空安全"><a href="#空安全" class="header-anchor">#</a> 空安全</h2> <p>Kotlin 的类型系统旨在消除来自代码空引用的危险，也称为 <a href="https://en.wikipedia.org/wiki/Tony_Hoare#Apologies_and_retractions" target="_blank" rel="noopener noreferrer">十亿美元的错误<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="kotlin-null-处理机制"><a href="#kotlin-null-处理机制" class="header-anchor">#</a> kotlin NULL 处理机制 ： <code>？</code></h3> <p>在 Kotlin 里面，所有的变量默认都是不允许为空的，如果你给它赋值 null，就会报错</p> <p>这种有点强硬的要求，其实是很合理的：既然你声明了一个变量，就是要使用它对吧？那你把它赋值为 null 干嘛？要尽量让它有可用的值啊。Java 在这方面很宽松，我们成了习惯，但 Kotlin 更强的限制其实在你熟悉了之后，是会减少很多运行时的问题的。</p> <p>例如这段代码：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">heat</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">heat</span><span class="token punctuation">(</span>str<span class="token operator">:</span>String<span class="token punctuation">)</span><span class="token operator">:</span>String <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;热<span class="token interpolation variable">$str</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>编译器报错：空值不可以赋给不是空类型的一个变量：</p> <p><img alt="2020-12-16-21-47-38" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-16-21-47-38.png" loading="lazy" class="lazy"></p> <p>函数设计的时候参数后面加上 ？ 就可以传入 null 值</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token function">heat</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">heat</span><span class="token punctuation">(</span>str<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">:</span>String <span class="token punctuation">{</span>  <span class="token comment">//加上问号代表参数可以为空</span>
    <span class="token keyword">return</span> <span class="token string">&quot;热<span class="token interpolation variable">$str</span>&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>编译器不报错：</p> <p><img alt="2020-12-16-21-50-54" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-16-21-50-54.png" loading="lazy" class="lazy"></p> <p>对于这些可以为空值的变量，可以在类型右边加一个？号，解除它的非空限制：</p> <ul><li>变量仍然需要手动初始化，如果不初始化的话会报错；</li> <li>不额外添加问号的时候给变量初始化赋值 null 的话报错，之后再次赋值为 null 也会报错；变量用？设置为可空的时候，可以赋值为 null</li></ul> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    a <span class="token operator">=</span> <span class="token string">&quot;haha&quot;</span>
    <span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">/*null haha*/</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">test</span><span class="token punctuation">(</span>input<span class="token operator">:</span> String<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//返回值同理，加 String ?</span>
    <span class="token function">println</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>访问可能为空的变量类型的方法时就会报错</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">var</span> a<span class="token operator">:</span> String <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span> <span class="token comment">// 默认情况下，常规初始化意味着非空</span>
a <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 编译错误</span>
<span class="token keyword">var</span> b<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span> <span class="token comment">// 可以设置为空</span>
b <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// ok</span>
<span class="token function">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
<span class="token keyword">val</span> l <span class="token operator">=</span> a<span class="token punctuation">.</span>length <span class="token comment">//✔</span>
<span class="token keyword">val</span> l <span class="token operator">=</span> b<span class="token punctuation">.</span>length <span class="token comment">// 错误：变量“b”可能为空</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="在条件中检测-null-if"><a href="#在条件中检测-null-if" class="header-anchor">#</a> 在条件中检测 null  <code>if</code></h3> <p>但是仍然想访问对象的方法怎么办？：</p> <p>首先，你可以显式检测 b 是否为 null，并分别处理两种可能：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> l <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> b<span class="token punctuation">.</span>length <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>编译器会跟踪所执行检测的信息，并允许你在 if 内部调用 length。 同时，也支持更复杂（更智能）的条件：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> b<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token string">&quot;Kotlin&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> b<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;String of length <span class="token interpolation"><span class="token delimiter variable">${</span>b<span class="token punctuation">.</span>length<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Empty string&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>请注意，这只适用于 b 是不可变的情况（即在检测和使用之间没有修改过的局部变量 ，或者不可覆盖并且有幕后字段的 val 成员），因为否则可能会发生在检测之后 b 又变为 null 的情况。</p> <h3 id="安全的调用-let"><a href="#安全的调用-let" class="header-anchor">#</a> 安全的调用  <code>?. let</code></h3> <p>你的第二个选择是安全调用操作符，写作  <code>?.</code> ：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token string">&quot;Kotlin&quot;</span>
    <span class="token keyword">val</span> b<span class="token operator">:</span> String<span class="token operator">?</span> <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token function">println</span><span class="token punctuation">(</span>b<span class="token operator">?</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>a<span class="token operator">?</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// 无需安全调用</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果 b 非空，就返回 b.length，否则返回 null，这个表达式的类型是  <code>Int?</code> 。</p> <p>安全调用在链式调用中很有用。例如，如果一个员工 Bob 可能会（或者不会）分配给一个部门， 并且可能有另外一个员工是该部门的负责人，那么获取 Bob 所在部门负责人（如果有的话）的名字，我们写作：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code>bob<span class="token operator">?</span><span class="token punctuation">.</span>department<span class="token operator">?</span><span class="token punctuation">.</span>head<span class="token operator">?</span><span class="token punctuation">.</span>name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果任意一个属性（环节）为空，这个链式调用就会返回 null。</p> <p>如果要只对非空值执行某个操作，安全调用操作符可以与 <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/let.html" target="_blank" rel="noopener noreferrer">let<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 一起使用：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> listWithNulls<span class="token operator">:</span> List<span class="token operator">&lt;</span>String<span class="token operator">?</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token string">&quot;Kotlin&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">in</span> listWithNulls<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        item<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">let</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span>it<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token comment">// 输出 Kotlin 并忽略 null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>安全调用也可以出现在赋值的左侧。这样，如果调用链中的任何一个接收者为空都会跳过赋值，而右侧的表达式根本不会求值：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token comment">// 如果 `person` 或者 `person.department` 其中之一为空，都不会调用该函数：</span>
person<span class="token operator">?</span><span class="token punctuation">.</span>department<span class="token operator">?</span><span class="token punctuation">.</span>head <span class="token operator">=</span> managersPool<span class="token punctuation">.</span><span class="token function">getManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="elvis-操作符"><a href="#elvis-操作符" class="header-anchor">#</a> Elvis 操作符</h3> <p>当我们有一个可空的引用 b 时，我们可以说 “如果 b 非空，我使用它；否则使用某个非空的值”：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> l<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> b<span class="token punctuation">.</span>length <span class="token keyword">else</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>除了完整的 if - 表达式，这还可以通过 Elvis 操作符表达，写作？:：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> l <span class="token operator">=</span> b<span class="token operator">?</span><span class="token punctuation">.</span>length <span class="token operator">?:</span> <span class="token operator">-</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果  <code>?:</code>  左侧表达式非空，elvis 操作符就返回其左侧表达式，否则返回右侧表达式。<br>
请注意，当且仅当左侧为空时，才会对右侧表达式求值。</p> <p>请注意，因为 throw 和 return 在 Kotlin 中都是表达式，所以它们也可以用在 elvis 操作符右侧。这可能会非常方便，例如，检测函数参数：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>node<span class="token operator">:</span> Node<span class="token punctuation">)</span><span class="token operator">:</span> String<span class="token operator">?</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> parent <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?:</span> <span class="token keyword">return</span> <span class="token keyword">null</span>
    <span class="token keyword">val</span> name <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?:</span> <span class="token keyword">throw</span> <span class="token function">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;name expected&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">// ……</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="操作符"><a href="#操作符" class="header-anchor">#</a> !! 操作符</h3> <p>第三种选择是为 NPE 爱好者准备的：非空断言运算符（!!）将任何值转换为非空类型，若该值为空则抛出异常。我们可以写 b!! ，这会返回一个非空的 b 值 （例如：在我们例子中的 String）或者如果 b 为空，就会抛出一个 NPE 异常：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> l <span class="token operator">=</span> b<span class="token operator">!!</span><span class="token punctuation">.</span>length
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>因此，如果你想要一个 NPE，你可以得到它，但是你必须显式要求它，否则它不会不期而至。</p> <h3 id="安全的类型转换"><a href="#安全的类型转换" class="header-anchor">#</a> 安全的类型转换</h3> <p>如果对象不是目标类型，那么常规类型转换可能会导致 ClassCastException (类转换异常)。 另一个选择是使用安全的类型转换，如果尝试转换不成功则返回 null：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> aInt<span class="token operator">:</span> Int<span class="token operator">?</span> <span class="token operator">=</span> a <span class="token keyword">as</span><span class="token operator">?</span> Int
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="可空类型的集合"><a href="#可空类型的集合" class="header-anchor">#</a> 可空类型的集合</h3> <p>如果你有一个可空类型元素的集合，并且想要过滤非空元素，你可以使用 filterNotNull 来实现：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> nullableList<span class="token operator">:</span> List<span class="token operator">&lt;</span>Int<span class="token operator">?</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> intList<span class="token operator">:</span> List<span class="token operator">&lt;</span>Int<span class="token operator">&gt;</span> <span class="token operator">=</span> nullableList<span class="token punctuation">.</span><span class="token function">filterNotNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>List 对象的方法 ： filterNotNull</p> <h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <p>不用像 cpp 中的函数声明语法规则，写在后面的函数在 main 函数中也可以进行调用，自定义函数和 main 函数不分先后顺序</p> <p>kotlin 函数框架：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> 函数名（参数名：参数类型）：返回值类型 <span class="token punctuation">{</span>  
    函数体  
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="定义函数"><a href="#定义函数" class="header-anchor">#</a> 定义函数：</h3> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">printstar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">//返回值不写就是 kotlin.Unit</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//返回值类型为 Unit 代表无返回值，可以省略不写</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="使用函数"><a href="#使用函数" class="header-anchor">#</a> 使用函数：</h3> <p>调用函数使用传统的方法：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">sayhello</span><span class="token punctuation">(</span><span class="token string">&quot;fengwei&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">sayhello</span><span class="token punctuation">(</span>name<span class="token operator">:</span>String<span class="token punctuation">)</span><span class="token operator">:</span>String<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token operator">+</span>name
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>调用成员函数使用点表示法：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token function">Stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建类 Stream 实例并调用 read()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h3> <p>函数参数使用 Pascal 表示法定义，即 name: type。参数用逗号隔开。 每个参数必须有显式类型：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">powerOf</span><span class="token punctuation">(</span>number<span class="token operator">:</span> Int<span class="token punctuation">,</span> exponent<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">powerOf</span><span class="token punctuation">(</span>
    number<span class="token operator">:</span> Int<span class="token punctuation">,</span>
    exponent<span class="token operator">:</span> Int<span class="token punctuation">,</span> <span class="token comment">// trailing comma</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*...*/</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="默认参数和具名参数"><a href="#默认参数和具名参数" class="header-anchor">#</a> 默认参数和具名参数</h3> <p>函数参数可以有默认值，当省略相应的参数时使用默认值。与其他语言相比，这可以减少重载数量：</p> <p>Kotlin 默认参数是通过类型后面的  <code>=</code>  来定义默认参数的</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">read</span><span class="token punctuation">(</span>
    b<span class="token operator">:</span> Array<span class="token operator">&lt;</span>Byte<span class="token operator">&gt;</span><span class="token punctuation">,</span> 
    off<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> 
    len<span class="token operator">:</span> Int <span class="token operator">=</span> b<span class="token punctuation">.</span>size<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>重写函数的时候总是使用与基类型方法相同的默认参数值。 当覆盖一个带有默认参数值的方法时，必须从签名中省略默认参数值：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">open</span> <span class="token keyword">class</span> A <span class="token punctuation">{</span>
    <span class="token keyword">open</span> <span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>i<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> B <span class="token operator">:</span> <span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>i<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>  <span class="token comment">// 不能有默认值</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>如果一个默认参数在一个无默认值的参数之前，那么该默认值只能通过使用具名参数调用该函数来使用：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>
    bar<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> 
    baz<span class="token operator">:</span> Int<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span>baz <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 使用默认值 bar = 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果在默认参数之后的最后一个参数是 lambda 表达式，那么它既可以作为具名参数在括号内传入，也可以在括号外传入：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span>
    bar<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    baz<span class="token operator">:</span> Int <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    qux<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Unit<span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>     <span class="token comment">// 使用默认值 baz = 1</span>
<span class="token function">foo</span><span class="token punctuation">(</span>qux <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 使用两个默认值 bar = 0 与 baz = 1</span>
foo <span class="token punctuation">{</span> <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>        <span class="token comment">// 使用两个默认值 bar = 0 与 baz = 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> Pi <span class="token operator">=</span> <span class="token number">3.1415926</span>  <span class="token comment">//类似于定义一个宏</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ans <span class="token operator">=</span> 获取圆的面积（半径 <span class="token operator">=</span> <span class="token number">3.0f</span><span class="token punctuation">)</span> 
    <span class="token comment">//在函数参数中给参数赋值 ：具名参数，已经存在的那些值就不用再写了</span>
    <span class="token comment">//使用 Float 浮点数要在后面加 f</span>
    <span class="token function">println</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> 获取圆的面积 <span class="token punctuation">(</span>PI<span class="token operator">:</span> Double <span class="token operator">=</span> Pi<span class="token punctuation">,</span> 半径：Float<span class="token punctuation">)</span><span class="token operator">:</span> Double <span class="token punctuation">{</span>
    <span class="token keyword">return</span> PI <span class="token operator">*</span> 半径 <span class="token operator">*</span> 半径 
    <span class="token comment">//double 和 float 不能混用，严格类型声明，否则会报错</span>
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>函数名和变量名能用汉字 wdf？？？ ，牛皮</p> <h3 id="单表达式函数"><a href="#单表达式函数" class="header-anchor">#</a> 单表达式函数</h3> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">var</span> result <span class="token operator">=</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">add</span> <span class="token punctuation">(</span>a<span class="token operator">:</span>Int<span class="token punctuation">,</span>b<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当函数只有 return 一行语句时</p> <p>可以简化为 = 声明函数</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token operator">+</span> b 
<span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token operator">=</span> a <span class="token operator">+</span> b   <span class="token comment">// public 方法则必须明确写出返回类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>无返回值的函数（类似 Java 中的 void)：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">printSum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Unit <span class="token punctuation">{</span> 
    <span class="token function">print</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 如果是返回 Unit 类型，则可以省略（对于 public 方法也是这样）：</span>
<span class="token keyword">public</span> <span class="token keyword">fun</span> <span class="token function">printSum</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token function">print</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="显式返回类型"><a href="#显式返回类型" class="header-anchor">#</a> 显式返回类型</h3> <p>具有块代码体的函数必须始终显式指定返回类型，除非他们旨在返回 Unit，Kotlin 不推断具有块代码体的函数的返回类型，因为这样的函数在代码体中可能有复杂的控制流，并且返回类型对于读者（有时甚至对于编译器）是不明显的。</p> <h3 id="可变数量的参数-varargs"><a href="#可变数量的参数-varargs" class="header-anchor">#</a> 可变数量的参数（Varargs）</h3> <p>函数的参数（通常是最后一个）可以用 vararg 修饰符标记：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">vararg</span> ts<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> result <span class="token operator">=</span> ArrayList<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>t <span class="token keyword">in</span> ts<span class="token punctuation">)</span> <span class="token comment">// ts is an Array</span>
        result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>允许将可变数量的参数传递给函数：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">vars</span><span class="token punctuation">(</span><span class="token keyword">vararg</span> v<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>vt <span class="token keyword">in</span> v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span>vt<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 测试</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment">// 输出 123455</span>
    <span class="token function">vars</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>      <span class="token comment">//print 函数不进行换行</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>还有另外两种用变量定义函数的写法（函数式编程的支持）</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> Int<span class="token punctuation">,</span> y<span class="token operator">:</span> Int <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>  <span class="token comment">//变量作为函数</span>
    <span class="token keyword">var</span> result2 <span class="token operator">=</span> <span class="token function">i</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>                <span class="token comment">//当作函数使用</span>
    <span class="token function">println</span><span class="token punctuation">(</span>result2<span class="token punctuation">)</span>                     <span class="token comment">//这种写法叫做函数表达式</span>
    <span class="token keyword">var</span> j<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token operator">-&gt;</span> x <span class="token operator">+</span> y <span class="token punctuation">}</span>
    <span class="token keyword">var</span> result3 <span class="token operator">=</span> <span class="token function">j</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>result3<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">,</span> b<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token operator">=</span> a <span class="token operator">+</span> b
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在函数内部，类型 T 的 vararg 参数的可见方式是作为 T 数组，即上例中的 ts 变量具有类型 Array <out T="">。</out></p> <p>只有一个参数可以标注为 vararg。如果 vararg 参数不是列表中的最后一个参数， 可以使用具名参数语法传递其后的参数的值，或者，如果参数具有函数类型，则通过在括号外部传一个 lambda。</p> <p>当我们调用 vararg - 函数时，我们可以一个接一个地传参，例如 asList (1, 2, 3)，或者，如果我们已经有一个数组并希望将其内容传给该函数，我们使用伸展（spread）操作符（在数组前面加 *）：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">val</span> a <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">val</span> list <span class="token operator">=</span> <span class="token function">asList</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span>a<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="中缀表示法"><a href="#中缀表示法" class="header-anchor">#</a> 中缀表示法</h3> <p>标有 infix 关键字的函数也可以使用中缀表示法（忽略该调用的点与圆括号）调用。中缀函数必须满足以下要求：</p> <ul><li>它们必须是成员函数或扩展函数；</li> <li>它们必须只有一个参数；</li> <li>其参数不得接受可变数量的参数且不能有默认值。 vararg＆默认参数</li></ul> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">infix</span> <span class="token keyword">fun</span> Int<span class="token punctuation">.</span><span class="token function">shl</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span> …… <span class="token punctuation">}</span>
<span class="token comment">// 用中缀表示法调用该函数</span>
<span class="token number">1</span> <span class="token operator">shl</span> <span class="token number">2</span>
<span class="token comment">// 等同于这样</span>
<span class="token number">1</span><span class="token punctuation">.</span><span class="token function">shl</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>中缀函数调用的优先级低于算术操作符、类型转换以及 rangeTo 操作符。 以下表达式是等价的：</p> <ul><li>1 shl 2 + 3 等价于 1 shl (2 + 3)</li> <li>0 until n * 2 等价于 0 until (n * 2)</li> <li>xs union ys as Set&lt;<em>&gt; 等价于 xs union (ys as Set&lt;</em>&gt;)</li></ul> <p>另一方面，中缀函数调用的优先级高于布尔操作符 &amp;&amp; 与 ||、is- 与 in- 检测以及其他一些操作符。这些表达式也是等价的：</p> <ul><li>a &amp;&amp; b xor c 等价于 a &amp;&amp; (b xor c)</li> <li>a xor b in c 等价于 (a xor b) in c</li></ul> <p>请注意，中缀函数总是要求指定接收者与参数。当使用中缀表示法在当前接收者上调用方法时，需要显式使用 this；不能像常规方法调用那样省略。这是确保非模糊解析所必需的。</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">class</span> MyStringCollection <span class="token punctuation">{</span>
    <span class="token keyword">infix</span> <span class="token keyword">fun</span> <span class="token function">add</span><span class="token punctuation">(</span>s<span class="token operator">:</span> String<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span>
    <span class="token keyword">fun</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span> add <span class="token string">&quot;abc&quot;</span>   <span class="token comment">// 正确</span>
        <span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>       <span class="token comment">// 正确</span>
        <span class="token comment">//add &quot;abc&quot;        // 错误：必须指定接收者</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="函数作用域"><a href="#函数作用域" class="header-anchor">#</a> 函数作用域</h3> <p>在 Kotlin 中函数可以在文件顶层声明，这意味着你不需要像一些语言如 Java、C# 或 Scala 那样需要创建一个类来保存一个函数。此外除了顶层函数，Kotlin 中函数也可以声明在局部作用域、作为成员函数以及扩展函数。</p> <h3 id="局部函数"><a href="#局部函数" class="header-anchor">#</a> 局部函数</h3> <p>Kotlin 支持局部函数，即一个函数在另一个函数内部：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token operator">:</span> Graph<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">dfs</span><span class="token punctuation">(</span>current<span class="token operator">:</span> Vertex<span class="token punctuation">,</span> visited<span class="token operator">:</span> MutableSet<span class="token operator">&lt;</span>Vertex<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>v <span class="token keyword">in</span> current<span class="token punctuation">.</span>neighbors<span class="token punctuation">)</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> visited<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">.</span>vertices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">HashSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>局部函数可以访问外部函数（即闭包）的局部变量，所以在上例中，visited 可以是局部变量：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token operator">:</span> Graph<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> visited <span class="token operator">=</span> HashSet<span class="token operator">&lt;</span>Vertex<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">fun</span> <span class="token function">dfs</span><span class="token punctuation">(</span>current<span class="token operator">:</span> Vertex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>v <span class="token keyword">in</span> current<span class="token punctuation">.</span>neighbors<span class="token punctuation">)</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">.</span>vertices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="成员函数"><a href="#成员函数" class="header-anchor">#</a> 成员函数</h3> <p>成员函数是在类或对象内部定义的函数：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">class</span> Sample <span class="token punctuation">{</span>
    <span class="token keyword">fun</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Foo&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>成员函数以点表示法调用：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token function">Sample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建类 Sample 实例并调用 foo</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="模板函数"><a href="#模板函数" class="header-anchor">#</a> 模板函数</h3> <p>函数可以有泛型参数，通过在函数名前使用尖括号指定：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token function">singletonList</span><span class="token punctuation">(</span>item<span class="token operator">:</span> T<span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/*……*/</span> <span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="内联函数"><a href="#内联函数" class="header-anchor">#</a> 内联函数</h3> <h3 id="扩展函数"><a href="#扩展函数" class="header-anchor">#</a> 扩展函数</h3> <h3 id="高阶函数和-lambda-表达式"><a href="#高阶函数和-lambda-表达式" class="header-anchor">#</a> 高阶函数和 Lambda 表达式</h3> <p>lambda 表达式使用实例：</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token comment">// 测试</span>
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> sumLambda<span class="token operator">:</span> <span class="token punctuation">(</span>Int<span class="token punctuation">,</span> Int<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> Int <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span>y <span class="token operator">-&gt;</span> x<span class="token operator">+</span>y<span class="token punctuation">}</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">sumLambda</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 输出 3</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="尾递归函数"><a href="#尾递归函数" class="header-anchor">#</a> 尾递归函数</h3> <p>Kotlin 支持一种称为<a href="https://zh.wikipedia.org/wiki/%E5%B0%BE%E8%B0%83%E7%94%A8" target="_blank" rel="noopener noreferrer">尾递归<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的函数式编程风格。 这允许一些通常用循环写的算法改用递归函数来写，而无堆栈溢出的风险。 当一个函数用 tailrec 修饰符标记并满足所需的形式时，编译器会优化该递归，留下一个快速而高效的基于循环的版本：</p> <p>从前有座山。</p> <p>例如递归求解阶乘的一个函数，在 C++ 中 这么写：</p> <blockquote><p>没有必要用递归的一个逻辑，不过卡一下还是得想一想</p></blockquote> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  ans <span class="token operator">*=</span> a<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">fact</span><span class="token punctuation">(</span>a <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
  cout <span class="token operator">&lt;&lt;</span> <span class="token function">fact</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>同样的逻辑过程，在 kotlin 中这么写</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> num <span class="token operator">=</span> <span class="token number">5</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">fact</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">fact</span><span class="token punctuation">(</span>a<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">*</span> <span class="token function">fact</span><span class="token punctuation">(</span>a <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="biginteger"><a href="#biginteger" class="header-anchor">#</a> BigInteger</h3> <p>Java.math 里面的一个 class</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">import</span> java<span class="token punctuation">.</span>math<span class="token punctuation">.</span>BigInteger
<span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">val</span> num <span class="token operator">=</span><span class="token function">BigInteger</span><span class="token punctuation">(</span><span class="token string">&quot;70&quot;</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">fact</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">fact</span><span class="token punctuation">(</span>a<span class="token operator">:</span> BigInteger<span class="token punctuation">)</span><span class="token operator">:</span> BigInteger <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> BigInteger<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> BigInteger<span class="token punctuation">.</span>ONE
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">*</span> <span class="token function">fact</span><span class="token punctuation">(</span>a <span class="token operator">-</span> BigInteger<span class="token punctuation">.</span>ONE<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="尾递归的优化"><a href="#尾递归的优化" class="header-anchor">#</a> 尾递归的优化</h3> <p>频繁累计递归函数的操作就会导致程序 <strong>栈溢出</strong></p> <p>java 语言中出现栈溢出后无法弥补</p> <p>kotlin 可以在函数名字前使用  <code>tailrec</code>  关键字来进行尾递归优化</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">oll_add</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fun</span> <span class="token function">oll_add</span><span class="token punctuation">(</span>num<span class="token operator">:</span>Int<span class="token punctuation">)</span><span class="token operator">:</span>Int <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;计算机第<span class="token interpolation"><span class="token delimiter variable">${</span>num<span class="token delimiter variable">}</span></span>次运算&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token operator">+</span><span class="token function">oll_add</span><span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img alt="2020-12-17-21-42-35" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-17-21-42-35.png" loading="lazy" class="lazy"></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>所以发现，光使用  <code>tailrec</code>  关键字还不行</p></div> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token function">oll_add</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">tailrec</span> <span class="token keyword">fun</span> <span class="token function">oll_add</span><span class="token punctuation">(</span>num<span class="token operator">:</span> Int<span class="token punctuation">,</span> result<span class="token operator">:</span> Int<span class="token punctuation">)</span><span class="token operator">:</span> Int <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;计算机第<span class="token interpolation"><span class="token delimiter variable">${</span>num<span class="token delimiter variable">}</span></span>次运算，result =<span class="token interpolation"><span class="token delimiter variable">${</span>result<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">oll_add</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> result <span class="token operator">+</span> num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>尾递归优化要求函数返回值还是调用函数本身</p> <p><img alt="2020-12-17-21-47-56" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-12-17-21-47-56.png" loading="lazy" class="lazy"></p> <p>当  <code>num=10000</code>  时：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>计算机第 15 次运算，result =50004880
计算机第 14 次运算，result =50004895
计算机第 13 次运算，result =50004909
计算机第 12 次运算，result =50004922
计算机第 11 次运算，result =50004934
计算机第 10 次运算，result =50004945
计算机第 9 次运算，result =50004955
计算机第 8 次运算，result =50004964
计算机第 7 次运算，result =50004972
计算机第 6 次运算，result =50004979
计算机第 5 次运算，result =50004985
计算机第 4 次运算，result =50004990
计算机第 3 次运算，result =50004994
计算机第 2 次运算，result =50004997
计算机第 1 次运算，result =50004999
计算机第 0 次运算，result =50005000
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="字符串转数字"><a href="#字符串转数字" class="header-anchor">#</a> 字符串转数字</h2> <p>数字和字符串对象存在 toString 和 toInt 方法</p> <h2 id="kotlin-人机交互"><a href="#kotlin-人机交互" class="header-anchor">#</a> kotlin 人机交互</h2> <ul><li>意念控制</li> <li>语义交互（科大讯飞）</li> <li>岩洞跟踪（VR）</li> <li>体感交互（Xbox 体感游戏）</li> <li>打字交互（处理输入输出）</li></ul> <p>readLine 函数和空值处理相关</p> <p>初始代码</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入第一个数字&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num1_str <span class="token operator">=</span> <span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入第二个数字&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num2_str <span class="token operator">=</span> <span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num1 <span class="token operator">=</span> num1_str<span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num2 <span class="token operator">=</span> num2_str<span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>修改</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入第一个数字&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num1_str <span class="token operator">=</span> <span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入第二个数字&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num2_str <span class="token operator">=</span> <span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num1 <span class="token operator">=</span> num1_str<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num2 <span class="token operator">=</span> num2_str<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//置为？后意思可以读入空值。空值和空值不可以相加</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>num1<span class="token delimiter variable">}</span></span> + <span class="token interpolation"><span class="token delimiter variable">${</span>num2<span class="token delimiter variable">}</span></span>=<span class="token interpolation"><span class="token delimiter variable">${</span>num1 <span class="token operator">+</span> num2<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//报错：需要类型 int 实际类型为 int? kotlin 中的强制空值设定将他们置为了两种不同的数据类型</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>再修改</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">fun</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入第一个数字&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num1_str <span class="token operator">=</span> <span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入第二个数字&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num2_str <span class="token operator">=</span> <span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> num1 <span class="token operator">=</span> num1_str<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//人工确保输入进来的数据一定不会为空</span>
    <span class="token keyword">var</span> num2 <span class="token operator">=</span> num2_str<span class="token operator">!!</span><span class="token punctuation">.</span><span class="token function">toInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">${</span>num1<span class="token delimiter variable">}</span></span> + <span class="token interpolation"><span class="token delimiter variable">${</span>num2<span class="token delimiter variable">}</span></span>=<span class="token interpolation"><span class="token delimiter variable">${</span>num1 <span class="token operator">+</span> num2<span class="token delimiter variable">}</span></span>&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>请输入第一个数字
2
请输入第二个数字
3
2 + 3=5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="异常处理"><a href="#异常处理" class="header-anchor">#</a> 异常处理</h2> <p><code>try{} catch{}</code>  关键字，将要检测的代码放在 try 的作用域下</p> <div class="language-kt line-numbers-mode"><pre class="language-kt"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token operator">:</span>Exception<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;输入数据有问题&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注意：try 中的语句相对于函数整体独立，如果 try 中进行变量的定义，那么之后使用这个变量就会出现变量未定义的错误</p></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      Created : 2020-12-19
    </span> <span class="update-date" data-v-4e23451f>
      Updated : 2021-03-17
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/12/16/_01-kotlin-basic-syntax.html" class="post-link" data-v-4e23451f>
      Previous Post : kotlin-basic-syntax
    </a> <a href="/posts/2020/12/19/npm%E5%85%A8%E5%B1%80%E5%AE%89%E8%A3%85%E5%90%8E%E4%BB%8D%E7%84%B6%E6%8F%90%E7%A4%BA%E6%89%BE%E4%B8%8D%E5%88%B0%E5%91%BD%E4%BB%A4.html" class="post-link" data-v-4e23451f>
      Next Post : windows npm 全局安装后仍然提示找不到命令
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://linbudu.top/assets/img/jp-valery-734900-unsplash.jpg);" data-v-9d847660><img src="https://i.loli.net/2021/02/21/zQ8rWE29aOKJD3q.jpg" alt="konng" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      konng
    </section> <section class="info-desc" data-v-9d847660>Design is Persistent Trying.</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="Tai'Yuan, Shan'Xi, China" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Tai'Yuan, Shan'Xi, China</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Tai'Yuan, Shan'Xi, China
        </span></span></section> <section data-v-9d847660><span title="Shan'Xi University" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Shan'Xi University</title><use xlink:href="#icon-organization" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Shan'Xi University
        </span></span></section> <section data-v-9d847660><a href="mailto:konng_0120@qq.com" title="konng_0120@qq.com" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>konng_0120@qq.com</title><use xlink:href="#icon-email" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          konng_0120@qq.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-9d847660><section class="info-sns clearfix" data-v-9d847660><a href="https://github.com/fengwei2002" target="_blank" class="sns-link" data-v-9d847660><span title="GitHub: fengwei2002" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>GitHub: fengwei2002</title><use xlink:href="#icon-github" data-v-9d847660 data-v-9d847660></use></svg></span></a><a href="https://www.zhihu.com/people/e2df61ca5f33cb1e72e27be2cefd18ba" target="_blank" class="sns-link" data-v-9d847660><span title="知乎: kycu" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>知乎: kycu</title><use xlink:href="#icon-zhihu" data-v-9d847660 data-v-9d847660></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>Table of Contents</span> <div class="post-nav-toc"><ul><li><a href="/posts/2020/12/19/_02-basic-advanced.html#空安全">空安全</a><ul><li><a href="/posts/2020/12/19/_02-basic-advanced.html#kotlin-null-处理机制">kotlin NULL 处理机制 ：？</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#在条件中检测-null-if">在条件中检测 null if</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#安全的调用-let">安全的调用 ?. let</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#elvis-操作符">Elvis 操作符</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#操作符">!! 操作符</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#安全的类型转换">安全的类型转换</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#可空类型的集合">可空类型的集合</a></li></ul></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#函数">函数</a><ul><li><a href="/posts/2020/12/19/_02-basic-advanced.html#定义函数">定义函数：</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#使用函数">使用函数：</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#参数">参数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#默认参数和具名参数">默认参数和具名参数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#单表达式函数">单表达式函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#显式返回类型">显式返回类型</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#可变数量的参数-varargs">可变数量的参数（Varargs）</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#中缀表示法">中缀表示法</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#函数作用域">函数作用域</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#局部函数">局部函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#成员函数">成员函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#模板函数">模板函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#内联函数">内联函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#扩展函数">扩展函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#高阶函数和-lambda-表达式">高阶函数和 Lambda 表达式</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#尾递归函数">尾递归函数</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#biginteger">BigInteger</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#尾递归的优化">尾递归的优化</a></li></ul></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#字符串转数字">字符串转数字</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#kotlin-人机交互">kotlin 人机交互</a></li><li><a href="/posts/2020/12/19/_02-basic-advanced.html#异常处理">异常处理</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2020/12/19/_02-basic-advanced.html#post-comments">
      Comments
    </a></div></div></aside></div> <footer class="footer" data-v-1375e54c><p class="footer-sns-links" data-v-1375e54c><a href="https://github.com/fengwei2002" target="_blank" class="sns-link" data-v-1375e54c><span title="GitHub: fengwei2002" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>GitHub: fengwei2002</title><use xlink:href="#icon-github" data-v-1375e54c data-v-1375e54c></use></svg></span></a><a href="https://www.zhihu.com/people/e2df61ca5f33cb1e72e27be2cefd18ba" target="_blank" class="sns-link" data-v-1375e54c><span title="知乎: kycu" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>知乎: kycu</title><use xlink:href="#icon-zhihu" data-v-1375e54c data-v-1375e54c></use></svg></span></a></p> <!----> <!----></footer></div><div class="global-ui"><!----><!----><APlayer audio="" fixed="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="3" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><!----><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/assets/js/app.dd7f87c0.js" defer></script><script src="/assets/js/9.31128199.js" defer></script><script src="/assets/js/40.746079fe.js" defer></script><script src="/assets/js/7.d59aec22.js" defer></script>
  </body>
</html>
