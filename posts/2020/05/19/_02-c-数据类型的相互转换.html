<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>C++ 数据类型的相互转换 | konng</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.d3f21bfd.css" as="style"><link rel="preload" href="/assets/js/app.dd7f87c0.js" as="script"><link rel="preload" href="/assets/js/9.31128199.js" as="script"><link rel="preload" href="/assets/js/20.1a6daa27.js" as="script"><link rel="preload" href="/assets/js/7.d59aec22.js" as="script"><link rel="prefetch" href="/assets/js/1.118e1072.js"><link rel="prefetch" href="/assets/js/10.c8dda1c7.js"><link rel="prefetch" href="/assets/js/11.23a503d8.js"><link rel="prefetch" href="/assets/js/12.1da34407.js"><link rel="prefetch" href="/assets/js/13.0c7658b1.js"><link rel="prefetch" href="/assets/js/14.58091560.js"><link rel="prefetch" href="/assets/js/15.0ba62277.js"><link rel="prefetch" href="/assets/js/16.8c40bd03.js"><link rel="prefetch" href="/assets/js/17.9718c0dd.js"><link rel="prefetch" href="/assets/js/18.4295a7c2.js"><link rel="prefetch" href="/assets/js/19.e5299494.js"><link rel="prefetch" href="/assets/js/21.abc54b0d.js"><link rel="prefetch" href="/assets/js/22.3dae1886.js"><link rel="prefetch" href="/assets/js/23.0fa98fed.js"><link rel="prefetch" href="/assets/js/24.b778858a.js"><link rel="prefetch" href="/assets/js/25.04a97041.js"><link rel="prefetch" href="/assets/js/26.657eae4e.js"><link rel="prefetch" href="/assets/js/27.53e343ef.js"><link rel="prefetch" href="/assets/js/28.7ceab2db.js"><link rel="prefetch" href="/assets/js/29.20eefe07.js"><link rel="prefetch" href="/assets/js/30.c2ff9ffa.js"><link rel="prefetch" href="/assets/js/31.7959298b.js"><link rel="prefetch" href="/assets/js/32.15b39cde.js"><link rel="prefetch" href="/assets/js/33.9f9c0485.js"><link rel="prefetch" href="/assets/js/34.91b45a31.js"><link rel="prefetch" href="/assets/js/35.1b62c37a.js"><link rel="prefetch" href="/assets/js/36.836c22cc.js"><link rel="prefetch" href="/assets/js/37.1e3621fa.js"><link rel="prefetch" href="/assets/js/38.a45fa955.js"><link rel="prefetch" href="/assets/js/39.7d6ecf4f.js"><link rel="prefetch" href="/assets/js/4.b6845c9f.js"><link rel="prefetch" href="/assets/js/40.746079fe.js"><link rel="prefetch" href="/assets/js/41.88b6d7ea.js"><link rel="prefetch" href="/assets/js/42.a8211748.js"><link rel="prefetch" href="/assets/js/43.54530cad.js"><link rel="prefetch" href="/assets/js/44.8c4d6ffc.js"><link rel="prefetch" href="/assets/js/45.d90360d4.js"><link rel="prefetch" href="/assets/js/46.66e2553b.js"><link rel="prefetch" href="/assets/js/47.7a8d6d6a.js"><link rel="prefetch" href="/assets/js/48.dd759600.js"><link rel="prefetch" href="/assets/js/49.62dda34d.js"><link rel="prefetch" href="/assets/js/5.1b790204.js"><link rel="prefetch" href="/assets/js/50.cd9f7f3e.js"><link rel="prefetch" href="/assets/js/51.426c26a3.js"><link rel="prefetch" href="/assets/js/52.c26c6095.js"><link rel="prefetch" href="/assets/js/53.1c7fb7a3.js"><link rel="prefetch" href="/assets/js/54.c457fbbb.js"><link rel="prefetch" href="/assets/js/55.f4870c89.js"><link rel="prefetch" href="/assets/js/56.0b80ab57.js"><link rel="prefetch" href="/assets/js/57.15d0b2b9.js"><link rel="prefetch" href="/assets/js/58.6b7f9285.js"><link rel="prefetch" href="/assets/js/59.6a95192e.js"><link rel="prefetch" href="/assets/js/6.4382cfba.js"><link rel="prefetch" href="/assets/js/60.73466548.js"><link rel="prefetch" href="/assets/js/61.6f07e2b5.js"><link rel="prefetch" href="/assets/js/62.5da19f2f.js"><link rel="prefetch" href="/assets/js/63.e7ae0b76.js"><link rel="prefetch" href="/assets/js/64.942e156c.js"><link rel="prefetch" href="/assets/js/65.0269ff5c.js"><link rel="prefetch" href="/assets/js/66.81138f05.js"><link rel="prefetch" href="/assets/js/67.b1feb7fc.js"><link rel="prefetch" href="/assets/js/68.2001d75d.js"><link rel="prefetch" href="/assets/js/69.fd7fcefc.js"><link rel="prefetch" href="/assets/js/70.ffbcd6d1.js"><link rel="prefetch" href="/assets/js/71.7d297446.js"><link rel="prefetch" href="/assets/js/72.fca7d1e2.js"><link rel="prefetch" href="/assets/js/73.08eacd75.js"><link rel="prefetch" href="/assets/js/74.119a731d.js"><link rel="prefetch" href="/assets/js/75.a73771c0.js"><link rel="prefetch" href="/assets/js/76.1a5a46e7.js"><link rel="prefetch" href="/assets/js/77.b5a2d4f4.js"><link rel="prefetch" href="/assets/js/78.786784a1.js"><link rel="prefetch" href="/assets/js/79.34b505aa.js"><link rel="prefetch" href="/assets/js/8.286fc710.js"><link rel="prefetch" href="/assets/js/80.fc7a538e.js"><link rel="prefetch" href="/assets/js/81.ef1338a8.js"><link rel="prefetch" href="/assets/js/82.ba916f03.js"><link rel="prefetch" href="/assets/js/83.f4828bf6.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.e25e154a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d3f21bfd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://pic1.zhimg.com/v2-977206e6259e3cc522db559414843524_r.jpg);" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          konng
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/" class="navbar-link" data-v-e4145d0a>
            home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            tags
          </a><a href="/About/" class="navbar-link" data-v-e4145d0a>
            about
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          C++ 数据类型的相互转换
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      Created : 2020-05-19
    </span> <span class="update-date" data-v-4e23451f>
      Updated : 2021-03-17
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/05/10/_04vscode%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89css.html" class="post-link" data-v-4e23451f>
      Previous Post : vscode 使用自定义 css
    </a> <a href="/posts/2020/05/20/_05vscode-markdown%E9%A2%84%E8%A7%88%E6%8F%92%E4%BB%B6.html" class="post-link" data-v-4e23451f>
      Next Post : 在 vscode 中自定义 markdown 预览效果
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><blockquote><p>数字与 string ，四种指针转换，数字转字符，char<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">→</span></span></span></span>string</p></blockquote> <h2 id="数字转-string"><a href="#数字转-string" class="header-anchor">#</a> 数字转 string</h2> <h3 id="使用标准库函数-std-to-string"><a href="#使用标准库函数-std-to-string" class="header-anchor">#</a> 使用标准库函数  <code>std::to_string()</code></h3> <p>std 命令空间下有一个 C++ 标准库函数 <code>std::to_string()</code> ，可用于将数值类型转换为  <code>string</code> 。使用时需要 include 头文件 <code>&lt;string&gt;</code> 。<br>
函数原型申明如下:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>string to_string <span class="token punctuation">(</span><span class="token keyword">int</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">unsigned</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">float</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">double</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
string to_string <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">double</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="使用函数模板-ostringstream"><a href="#使用函数模板-ostringstream" class="header-anchor">#</a> 使用函数模板 +  <code>ostringstream</code></h3> <p>使用函数模板将基本数据类型（整型、字符型、实型、布尔型）转换成 string。<br>
相当于自定义一个 tostring</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//ostringstream 对象用来进行格式化的输出，常用于将各种类型转换为 string 类型</span>
<span class="token comment">//ostringstream 只支持&lt;&lt;操作符</span>
<span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">&gt;</span> string <span class="token function">toString</span><span class="token punctuation">(</span><span class="token keyword">const</span> T<span class="token operator">&amp;</span> t<span class="token punctuation">)</span><span class="token punctuation">{</span>
    ostringstream oss<span class="token punctuation">;</span>  <span class="token comment">//创建一个格式化输出流</span>
    oss<span class="token operator">&lt;&lt;</span>t<span class="token punctuation">;</span>             <span class="token comment">//把值传递如流中</span>
    <span class="token keyword">return</span> oss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>
cout<span class="token operator">&lt;&lt;</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">14.2</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  <span class="token comment">//实型-&gt;string:输出 14.2</span>
cout<span class="token operator">&lt;&lt;</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">12301</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> <span class="token comment">//整型-&gt;string:输出 12301</span>
cout<span class="token operator">&lt;&lt;</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">123456789785</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span><span class="token comment">//长整型-&gt;string:输出 123456789785</span>
cout<span class="token operator">&lt;&lt;</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  <span class="token comment">//布尔型-&gt;string:输出 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="string-转为数字"><a href="#string-转为数字" class="header-anchor">#</a> string 转为数字</h2> <h3 id="使用-c-标准库函数"><a href="#使用-c-标准库函数" class="header-anchor">#</a> 使用 C 标准库函数</h3> <p>具体做法是先将 string 转换为 char * 字符串，再通过相应的类型转换函数转换为想要的数值类型。需要包含标准库函数  <code>&lt;stdlib.h&gt;</code> 。<br>
（1）string 转换为 int32_t</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>string love<span class="token operator">=</span><span class="token string">&quot;77&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> ilove<span class="token operator">=</span><span class="token function">atoi</span><span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//或者 16 位平台转换为 long int</span>
<span class="token keyword">int</span> ilove<span class="token operator">=</span><span class="token function">strtol</span><span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">NULL</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>（2）string 转换为 uint32_t</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token comment">//str: 待转换字符串</span>
<span class="token comment">//endptr: 指向 str 中数字后第一个非数字字符</span>
<span class="token comment">//base:转换基数（进制），范围从 2 至 36</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">int</span> strtoul <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">,</span> <span class="token keyword">int</span> base<span class="token punctuation">)</span><span class="token punctuation">;</span>
#示例
string love<span class="token operator">=</span><span class="token string">&quot;77&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> ul<span class="token punctuation">;</span>
ul <span class="token operator">=</span> <span class="token function">strtoul</span><span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>（3）string 转换为 int64_t</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>string love<span class="token operator">=</span><span class="token string">&quot;77&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> <span class="token keyword">long</span> llLove<span class="token operator">=</span><span class="token function">atoll</span><span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>（4）string 转换为 uint64_t</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token keyword">int</span> strtoull <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">,</span> <span class="token keyword">int</span> base<span class="token punctuation">)</span><span class="token punctuation">;</span>
#示例
string love<span class="token operator">=</span><span class="token string">&quot;77&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ull<span class="token punctuation">;</span>
ull <span class="token operator">=</span> strtoull <span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（5）string 转换为 float 或 double</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code>string love<span class="token operator">=</span><span class="token string">&quot;77.77&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">float</span> fLove<span class="token operator">=</span><span class="token function">atof</span><span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">double</span> dLove<span class="token operator">=</span><span class="token function">atof</span><span class="token punctuation">(</span>love<span class="token punctuation">.</span><span class="token function">c_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>（6）string 转换为 long double</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">long</span> <span class="token keyword">double</span> strtold <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> str<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">*</span> endptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="使用函数模板-istringstream"><a href="#使用函数模板-istringstream" class="header-anchor">#</a> 使用函数模板 +  <code>istringstream</code></h3> <p>stringstream 在 int 或 float 类型转换为 string 类型的方法中已经介绍过， 这里也能用作将 string 类型转换为常用的数值类型。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span>  </span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span>    </span><span class="token comment">//使用 stringstream 需要引入这个头文件  </span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>  
<span class="token comment">//模板函数:将 string 类型变量转换为常用的数值类型（此方法具有普遍适用性）  </span>
<span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">Type</span><span class="token operator">&gt;</span>  
Type <span class="token function">stringToNum</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span>  
    istringstream <span class="token function">iss</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//将字符串传入流中</span>
    Type num<span class="token punctuation">;</span>    <span class="token comment">//定义返回结果</span>
    iss <span class="token operator">&gt;&gt;</span> num<span class="token punctuation">;</span>  <span class="token comment">//将流中的内容传入结果中</span>
    <span class="token keyword">return</span> num<span class="token punctuation">;</span>  <span class="token comment">//返回结果</span>
<span class="token punctuation">}</span>  
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>  
    string <span class="token function">str</span><span class="token punctuation">(</span><span class="token string">&quot;00801&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    cout <span class="token operator">&lt;&lt;</span> stringToNum<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>  
    <span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="使用-c-标准库函数-2"><a href="#使用-c-标准库函数-2" class="header-anchor">#</a> 使用 C++ 标准库函数</h3> <p>使用 C++11 引入的 C++ 库函数将 string 转换为数值类型，相应的库函数申明于头文件 <code>&lt;string&gt;</code>  中。</p> <table><thead><tr><th>名称</th> <th>原型</th> <th>说明</th></tr></thead> <tbody><tr><td>stoi</td> <td>int stoi (const string&amp;  str, size_t* idx = 0, int base = 10);int stoi (const wstring&amp; str, size_t* idx = 0, int base = 10);</td> <td>将 string 转换为 int</td></tr> <tr><td>stol</td> <td>long stol (const string&amp;  str, size_t* idx = 0, int base = 10);long stol (const wstring&amp; str, size_t* idx = 0, int base = 10);</td> <td>将 string 转为 long int</td></tr> <tr><td>stoul</td> <td>unsigned long stoul (const string&amp;  str, size_t* idx = 0, int base = 10);unsigned long stoul (const wstring&amp; str, size_t* idx = 0, int base = 10);</td> <td>unsigned int</td></tr> <tr><td>stoll</td> <td>long long stoll (const string&amp;  str, size_t* idx = 0, int base = 10);long long stoll (const wstring&amp; str, size_t* idx = 0, int base = 10);</td> <td>string to long long</td></tr> <tr><td>stoull</td> <td>unsigned long long stoull (const string&amp;  str, size_t* idx = 0, int base = 10);unsigned long long stoull (const wstring&amp; str, size_t* idx = 0, int base = 10);</td> <td>string to unsigned long long</td></tr> <tr><td>stof</td> <td>float stof (const string&amp;  str, size_t* idx = 0);float stof (const wstring&amp; str, size_t* idx = 0);</td> <td>string to float (function template )</td></tr> <tr><td>stod</td> <td>double stod (const string&amp;  str, size_t* idx = 0);double stod (const wstring&amp; str, size_t* idx = 0);</td> <td>string to double</td></tr> <tr><td>stold</td> <td>long double stold (const string&amp;  str, size_t* idx = 0);long double stold (const wstring&amp; str, size_t* idx = 0);</td> <td>string to long double (function template)</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">形参说明:</p> <p>str: 重载了 string 和 wstring 版本，表示被转换的字符串。</p> <p>base: 表示转换基准，默认是 10 进制。</p> <p>idx: 表示一个  <code>size_t*</code>  的指针类型，默认为空值。不为空时，转换成功时获取第一个非数值字符的下标。一般情况下，因为它是直接 char 型指针把最后非数值字符的地址值和起始地址值相减，所以也<strong>表示成功转换的字符数量</strong>，如”10” 转成功为数值 10 时，*idx 的值为 2。</p></div> <h2 id="四种指针的转换方式"><a href="#四种指针的转换方式" class="header-anchor">#</a> 四种指针的转换方式</h2> <h3 id="static-cast"><a href="#static-cast" class="header-anchor">#</a> <code>static_cast:</code></h3> <p>可以实现 C++ 中内置基本数据类型之间的相互转换，enum、struct、 int、char、float 等。它不能进行无关类型（如非基类和子类）指针之间的转换。</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> c<span class="token operator">=</span><span class="token keyword">static_cast</span><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">7.987</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果涉及到类的话，static_cast 只能在有相互联系的类型中进行相互转换，不一定包含虚函数。</p> <h3 id="const-cast"><a href="#const-cast" class="header-anchor">#</a> <code>const_cast:</code></h3> <p>const_cast 操作不能在不同的种类间转换。相反，它仅仅把一个它作用的表达式转换成常量。它可以使一个本来不是 const 类型的数据转换成 const 类型的，或者把 const 属性去掉。</p> <h3 id="reinterpret-cast"><a href="#reinterpret-cast" class="header-anchor">#</a> <code>reinterpret_cast:</code></h3> <p>interpret 是解释的意思，reinterpret 即为重新解释，此标识符的意思即为数据的二进制形式重新解释，但是不改变其值。）有着和 C 风格的强制转换同样的能力。它可以转化任何内置的数据类型为其他任何的数据类型，也可以转化任何指针类型为其他的类型。它甚至可以转化内置的数据类型为指针，无须考虑类型安全或者常量的情形。不到万不得已绝对不用。</p> <h3 id="dynamic-cast"><a href="#dynamic-cast" class="header-anchor">#</a> <code>dynamic_cast:</code></h3> <p>（1）其他三种都是编译时完成的，dynamic_cast 是运行时处理的，运行时要进行类型检查。<br>
（2）不能用于内置的基本数据类型的强制转换。<br>
（3）dynamic_cast 转换如果成功的话返回的是指向类的指针或引用，转换失败的话则会返回 NULL。<br>
（4）使用 dynamic_cast 进行转换的，基类中一定要有虚函数，否则编译不通过。<br>
需要检测有虚函数的原因：类中存在虚函数，就说明它有想要让基类指针或引用指向派生类对象的情况，此时转换才有意义。<br>
这是由于运行时类型检查需要运行时类型信息，而这个信息存储在类的虚函数表（关于虚函数表的概念，详细可见 &lt;Inside c++ object model&gt;）中，<br>
只有定义了虚函数的类才有虚函数表。<br>
（5） 在类的转换时，在类层次间进行上行转换时，dynamic_cast 和 static_cast 的效果是一样的。在进行下行转换 时，dynamic_cast 具有类型检查的功能，比 static_cast 更安全。向上转换即为指向子类对象的向下转换，即将父类指针转化子类指针。向下转换的成功与否还与将要转换的类型有关，即要转换的指针指向的对象的实际类型与转换以后的对象类型一定要相同，否则转换失败。</p> <h2 id="int-转-char"><a href="#int-转-char" class="header-anchor">#</a> int 转 char</h2> <p>写 leetcode 1002 的时候遇到了字母表的映射</p> <p>统计每一个字母出现的次数后，经过部分处理还要继续使用这些数字所对应的字符</p> <p>所以就遇到了 int 转 char 的需求，方法如同 char 转 int 一样简单</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token string">'0'</span><span class="token operator">+</span>i<span class="token punctuation">;</span><span class="token comment">//now c is '6'</span>
result<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="char-转-string"><a href="#char-转-string" class="header-anchor">#</a> char 转 string</h2> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code> <span class="token keyword">const</span> <span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span>
<span class="token comment">//1.使用 string 的构造函数</span>
string <span class="token function">s</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2.声明string 后将char push_back</span>
string s1<span class="token punctuation">;</span>
s1<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//3.使用stringstream</span>
stringstream ss<span class="token punctuation">;</span>
ss <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">;</span>
string str2 <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//注意 使用to_string 方法会转化为char对应的ascii码</span>
<span class="token comment">//原因是 to_string 没有接受char型参数的函数原型，有一个参数类型</span>
<span class="token comment">//为int 的函数原型，所以传入char型字符 实际是先将char 转化</span>
<span class="token comment">//为int 型的ascii 码，然后再转变为string</span>
<span class="token comment">//以下输出结果为 97</span>
cout <span class="token operator">&lt;&lt;</span> <span class="token function">to_string</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      Created : 2020-05-19
    </span> <span class="update-date" data-v-4e23451f>
      Updated : 2021-03-17
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/05/10/_04vscode%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89css.html" class="post-link" data-v-4e23451f>
      Previous Post : vscode 使用自定义 css
    </a> <a href="/posts/2020/05/20/_05vscode-markdown%E9%A2%84%E8%A7%88%E6%8F%92%E4%BB%B6.html" class="post-link" data-v-4e23451f>
      Next Post : 在 vscode 中自定义 markdown 预览效果
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://linbudu.top/assets/img/jp-valery-734900-unsplash.jpg);" data-v-9d847660><img src="https://i.loli.net/2021/02/21/zQ8rWE29aOKJD3q.jpg" alt="konng" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      konng
    </section> <section class="info-desc" data-v-9d847660>Design is Persistent Trying.</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="Tai'Yuan, Shan'Xi, China" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Tai'Yuan, Shan'Xi, China</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Tai'Yuan, Shan'Xi, China
        </span></span></section> <section data-v-9d847660><span title="Shan'Xi University" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Shan'Xi University</title><use xlink:href="#icon-organization" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Shan'Xi University
        </span></span></section> <section data-v-9d847660><a href="mailto:konng_0120@qq.com" title="konng_0120@qq.com" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>konng_0120@qq.com</title><use xlink:href="#icon-email" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          konng_0120@qq.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-9d847660><section class="info-sns clearfix" data-v-9d847660><a href="https://github.com/fengwei2002" target="_blank" class="sns-link" data-v-9d847660><span title="GitHub: fengwei2002" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>GitHub: fengwei2002</title><use xlink:href="#icon-github" data-v-9d847660 data-v-9d847660></use></svg></span></a><a href="https://www.zhihu.com/people/e2df61ca5f33cb1e72e27be2cefd18ba" target="_blank" class="sns-link" data-v-9d847660><span title="知乎: kycu" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>知乎: kycu</title><use xlink:href="#icon-zhihu" data-v-9d847660 data-v-9d847660></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>Table of Contents</span> <div class="post-nav-toc"><ul><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#数字转-string">数字转 string</a><ul><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#使用标准库函数-std-to-string">使用标准库函数 std::to_string()</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#使用函数模板-ostringstream">使用函数模板 + ostringstream</a></li></ul></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#string-转为数字">string 转为数字</a><ul><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#使用-c-标准库函数">使用 C 标准库函数</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#使用函数模板-istringstream">使用函数模板 + istringstream</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#使用-c-标准库函数-2">使用 C++标准库函数</a></li></ul></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#四种指针的转换方式">四种指针的转换方式</a><ul><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#static-cast">static_cast:</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#const-cast">const_cast:</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#reinterpret-cast">reinterpret_cast:</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#dynamic-cast">dynamic_cast:</a></li></ul></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#int-转-char">int 转 char</a></li><li><a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#char-转-string">char 转 string</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2020/05/19/_02-c-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2.html#post-comments">
      Comments
    </a></div></div></aside></div> <footer class="footer" data-v-1375e54c><p class="footer-sns-links" data-v-1375e54c><a href="https://github.com/fengwei2002" target="_blank" class="sns-link" data-v-1375e54c><span title="GitHub: fengwei2002" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>GitHub: fengwei2002</title><use xlink:href="#icon-github" data-v-1375e54c data-v-1375e54c></use></svg></span></a><a href="https://www.zhihu.com/people/e2df61ca5f33cb1e72e27be2cefd18ba" target="_blank" class="sns-link" data-v-1375e54c><span title="知乎: kycu" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>知乎: kycu</title><use xlink:href="#icon-zhihu" data-v-1375e54c data-v-1375e54c></use></svg></span></a></p> <!----> <!----></footer></div><div class="global-ui"><!----><!----><APlayer audio="" fixed="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="3" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><!----><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/assets/js/app.dd7f87c0.js" defer></script><script src="/assets/js/9.31128199.js" defer></script><script src="/assets/js/20.1a6daa27.js" defer></script><script src="/assets/js/7.d59aec22.js" defer></script>
  </body>
</html>
