<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Stack &amp; Queue | konng</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.d3f21bfd.css" as="style"><link rel="preload" href="/assets/js/app.dd7f87c0.js" as="script"><link rel="preload" href="/assets/js/9.31128199.js" as="script"><link rel="preload" href="/assets/js/66.81138f05.js" as="script"><link rel="preload" href="/assets/js/7.d59aec22.js" as="script"><link rel="prefetch" href="/assets/js/1.118e1072.js"><link rel="prefetch" href="/assets/js/10.c8dda1c7.js"><link rel="prefetch" href="/assets/js/11.23a503d8.js"><link rel="prefetch" href="/assets/js/12.1da34407.js"><link rel="prefetch" href="/assets/js/13.0c7658b1.js"><link rel="prefetch" href="/assets/js/14.58091560.js"><link rel="prefetch" href="/assets/js/15.0ba62277.js"><link rel="prefetch" href="/assets/js/16.8c40bd03.js"><link rel="prefetch" href="/assets/js/17.9718c0dd.js"><link rel="prefetch" href="/assets/js/18.4295a7c2.js"><link rel="prefetch" href="/assets/js/19.e5299494.js"><link rel="prefetch" href="/assets/js/20.1a6daa27.js"><link rel="prefetch" href="/assets/js/21.abc54b0d.js"><link rel="prefetch" href="/assets/js/22.3dae1886.js"><link rel="prefetch" href="/assets/js/23.0fa98fed.js"><link rel="prefetch" href="/assets/js/24.b778858a.js"><link rel="prefetch" href="/assets/js/25.04a97041.js"><link rel="prefetch" href="/assets/js/26.657eae4e.js"><link rel="prefetch" href="/assets/js/27.53e343ef.js"><link rel="prefetch" href="/assets/js/28.7ceab2db.js"><link rel="prefetch" href="/assets/js/29.20eefe07.js"><link rel="prefetch" href="/assets/js/30.c2ff9ffa.js"><link rel="prefetch" href="/assets/js/31.7959298b.js"><link rel="prefetch" href="/assets/js/32.15b39cde.js"><link rel="prefetch" href="/assets/js/33.9f9c0485.js"><link rel="prefetch" href="/assets/js/34.91b45a31.js"><link rel="prefetch" href="/assets/js/35.1b62c37a.js"><link rel="prefetch" href="/assets/js/36.836c22cc.js"><link rel="prefetch" href="/assets/js/37.1e3621fa.js"><link rel="prefetch" href="/assets/js/38.a45fa955.js"><link rel="prefetch" href="/assets/js/39.7d6ecf4f.js"><link rel="prefetch" href="/assets/js/4.b6845c9f.js"><link rel="prefetch" href="/assets/js/40.746079fe.js"><link rel="prefetch" href="/assets/js/41.88b6d7ea.js"><link rel="prefetch" href="/assets/js/42.a8211748.js"><link rel="prefetch" href="/assets/js/43.54530cad.js"><link rel="prefetch" href="/assets/js/44.8c4d6ffc.js"><link rel="prefetch" href="/assets/js/45.d90360d4.js"><link rel="prefetch" href="/assets/js/46.66e2553b.js"><link rel="prefetch" href="/assets/js/47.7a8d6d6a.js"><link rel="prefetch" href="/assets/js/48.dd759600.js"><link rel="prefetch" href="/assets/js/49.62dda34d.js"><link rel="prefetch" href="/assets/js/5.1b790204.js"><link rel="prefetch" href="/assets/js/50.cd9f7f3e.js"><link rel="prefetch" href="/assets/js/51.426c26a3.js"><link rel="prefetch" href="/assets/js/52.c26c6095.js"><link rel="prefetch" href="/assets/js/53.1c7fb7a3.js"><link rel="prefetch" href="/assets/js/54.c457fbbb.js"><link rel="prefetch" href="/assets/js/55.f4870c89.js"><link rel="prefetch" href="/assets/js/56.0b80ab57.js"><link rel="prefetch" href="/assets/js/57.15d0b2b9.js"><link rel="prefetch" href="/assets/js/58.6b7f9285.js"><link rel="prefetch" href="/assets/js/59.6a95192e.js"><link rel="prefetch" href="/assets/js/6.4382cfba.js"><link rel="prefetch" href="/assets/js/60.73466548.js"><link rel="prefetch" href="/assets/js/61.6f07e2b5.js"><link rel="prefetch" href="/assets/js/62.5da19f2f.js"><link rel="prefetch" href="/assets/js/63.e7ae0b76.js"><link rel="prefetch" href="/assets/js/64.942e156c.js"><link rel="prefetch" href="/assets/js/65.0269ff5c.js"><link rel="prefetch" href="/assets/js/67.b1feb7fc.js"><link rel="prefetch" href="/assets/js/68.2001d75d.js"><link rel="prefetch" href="/assets/js/69.fd7fcefc.js"><link rel="prefetch" href="/assets/js/70.ffbcd6d1.js"><link rel="prefetch" href="/assets/js/71.7d297446.js"><link rel="prefetch" href="/assets/js/72.fca7d1e2.js"><link rel="prefetch" href="/assets/js/73.08eacd75.js"><link rel="prefetch" href="/assets/js/74.119a731d.js"><link rel="prefetch" href="/assets/js/75.a73771c0.js"><link rel="prefetch" href="/assets/js/76.1a5a46e7.js"><link rel="prefetch" href="/assets/js/77.b5a2d4f4.js"><link rel="prefetch" href="/assets/js/78.786784a1.js"><link rel="prefetch" href="/assets/js/79.34b505aa.js"><link rel="prefetch" href="/assets/js/8.286fc710.js"><link rel="prefetch" href="/assets/js/80.fc7a538e.js"><link rel="prefetch" href="/assets/js/81.ef1338a8.js"><link rel="prefetch" href="/assets/js/82.ba916f03.js"><link rel="prefetch" href="/assets/js/83.f4828bf6.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.e25e154a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d3f21bfd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://pic1.zhimg.com/v2-977206e6259e3cc522db559414843524_r.jpg);" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          konng
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/" class="navbar-link" data-v-e4145d0a>
            home
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            tags
          </a><a href="/About/" class="navbar-link" data-v-e4145d0a>
            about
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          Stack &amp; Queue
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      Created : 2020-11-26
    </span> <span class="update-date" data-v-4e23451f>
      Updated : 2021-03-17
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/11/20/_10-size-type-size-t.html" class="post-link" data-v-4e23451f>
      Previous Post : sizetype &amp;sizet
    </a> <a href="/posts/2020/11/27/_08-%E5%85%A8%E6%8E%92%E5%88%97.html" class="post-link" data-v-4e23451f>
      Next Post : 全排列
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><blockquote><p>数据结构 04 Stack &amp; Queue 栈和队列</p></blockquote> <div class="note"><p class="title">NOTE</p><p>就像 [上海交通大学生存手册] 中提到的一样，多年前的他们大学就和现在我的大学一样<br>
随着社会的发展，一流大学的各种完善一定是越来越好的<br>
所以相当于拥有了前车之鉴</p> <p>总有更值得做的事情是吧，无论你做的事情是否有意义 —— 哪怕任何事情都不做，时间也会从我们的身边溜走。我们必须一日三省问自己，今天的时间是否过得有价值。</p> <p>数据结构寒假前全部认真过完一遍，然后就开始刷题写游戏和 APP（C＃，kotlin）冲冲冲，找工作也就大前端找了，我可以的</p></div><h2 id="栈接口与实现"><a href="#栈接口与实现" class="header-anchor">#</a> 栈接口与实现</h2> <p>是一种线性序列的特例，扮演着基本而重要的角色</p> <p>Stack 一般沿垂直方向画出<br>
堆在一起的椅子和盘子就是栈模型，都见过的 Hanno 塔问题也是这种类型的数据结构</p> <p>只能执行放入顶部 <code>(push)</code>  或者取出顶部元素 <code>(pop)</code> , 查询顶部元素 <code>(top)</code> <br>
 因为有这些特殊接口规定，所以一些算法便可以使用这种结构大显身手</p> <p>因为是一种序列受限后的特例，所以可以基于向量或者列表派生出来</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">template</span><span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">Stack</span> <span class="token keyword">public</span> Vector<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>size empty 以及其他开放接口均可直接沿用
    <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span>T <span class="token keyword">const</span><span class="token operator">&amp;</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    T <span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
    T <span class="token operator">&amp;</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>栈的接口可以都在向量末尾操作，所以复杂度都可以是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span>，可以很方便快捷</p> <h2 id="栈结构的典型应用"><a href="#栈结构的典型应用" class="header-anchor">#</a> 栈结构的典型应用</h2> <p><img alt="2020-11-26-11-42-24" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-11-26-11-42-24.jpg" loading="lazy" class="lazy"></p> <h3 id="进制转换"><a href="#进制转换" class="header-anchor">#</a> 进制转换</h3> <p>逆序输出类型问题的实例:<br>
 特点：输入输出的数据顺序相反，输入输出的长度事先不能确定</p> <p>进制转换使用短除法:</p> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>⇒</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">10\Rightarrow  2</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span> , 将原数除 2 数的整数部分（商）和余数分开，递归处理，余数部分记录下来既是二进制的表示</p> <p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo>⇒</mo><mn>5</mn></mrow><annotation encoding="application/x-tex">10\Rightarrow5</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⇒</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span></span></span></span> , 分别处理商和余数，然后抄录余数，就完成了转换过程<br>
计算过程自上而下，输出过程自下而上，计算深度也是未知深度</p> <p>convert:<br>
n. 皈依者；改变宗教信仰者<br>
 vt. 使转变；转换…；使… 改变信仰<br>
 vi. 转变，变换；皈依；改变信仰</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token function">convert</span><span class="token punctuation">(</span>Stack<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span> S<span class="token punctuation">,</span> __int64 n<span class="token punctuation">,</span> <span class="token keyword">int</span> base<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">char</span> digit<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'0'</span><span class="token punctuation">,</span>
        <span class="token string">'1'</span><span class="token punctuation">,</span>
        <span class="token string">'2'</span><span class="token punctuation">,</span>
        <span class="token string">'3'</span><span class="token punctuation">,</span>
        <span class="token string">'4'</span><span class="token punctuation">,</span>
        <span class="token string">'A'</span><span class="token punctuation">,</span>
        <span class="token string">'B'</span>
    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//商为 0 时退出</span>
        S<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>dight<span class="token punctuation">[</span>n <span class="token operator">%</span> base<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        n <span class="token operator">/=</span> base<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>S<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> S<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//pop 后刚刚好是逆序输出</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="括号匹配"><a href="#括号匹配" class="header-anchor">#</a> 括号匹配</h3> <p>递归嵌套类问题：具有自相似性的问题可以用递归描述</p> <p><a href="https://www.luogu.com.cn/problem/P1739" target="_blank" rel="noopener noreferrer">典例：括号匹配<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ol><li>分支位置和递归深度都无从得知，使用超级多 if 暴力操作肯定可以解决（对各种特殊情况进行处理，卡数据）</li> <li>消除一对紧邻的括号，不影响全局的判断，那么，如何找到一对，如何简单的持续进行</li> <li>使用栈的结构，左括号入栈，遇到右括号就弹出栈顶的左括号，最后列表刚好为空即为匹配，中途用完左括号或者最后多出右括号则都是不匹配的</li></ol> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">bool</span> <span class="token function">brackets_match</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> exp<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">int</span> low<span class="token punctuation">,</span> <span class="token keyword">int</span> high<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Stack<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> S<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> low<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hi<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'('</span> <span class="token operator">==</span> exp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            S<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>exp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>S<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            S<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//遇到右括号，若栈非空，弹出左括号，尝试弹出</span>
        <span class="token keyword">else</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token comment">//遇到右括号时栈已经空掉，必定不匹配</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> S<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//最终 栈空就是匹配</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>使用整数计数器也可以实现目的，并且更加快，计数器反映的即是栈的空间（仅限单类括号<br>
但是当多种括号同时存在时，例如: <code>[(])</code> ，计数器判断就会出错</p> <p>以上思路及算法，可便捷的推广至多种括号并存的情况，而不能使用多个计数器实现这种功能<br>
反例  <code>[(])</code>  而栈就可以</p> <p><img alt="从左到右" data-src="https://raw.githubusercontent.com/fengwei2002/picture/master/picture352F858B92B1DC394CB70505FB5CCC66.jpg" loading="lazy" class="lazy"></p> <p>甚至，只需约定 “括号” 的通用格式，而不必事先固定括号的类型和数目，<br>
就像 HTML 语言的语法检查一样</p> <h3 id="栈混洗"><a href="#栈混洗" class="header-anchor">#</a> 栈混洗</h3> <p>与括号匹配非常相关的一个问题，重新排列栈中元素</p> <p><img alt="20A3EFF03FDEF4618F43AC2C37C7CFD6.jpg" data-src="https://raw.githubusercontent.com/fengwei2002/picture/master/picture20A3EFF03FDEF4618F43AC2C37C7CFD6.jpg" loading="lazy" class="lazy"></p> <p>栈混洗计数</p> <p>对于长度为 n 的输入序列，可能混洗的情况有几种</p> <p>卡特兰数数值等于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mo stretchy="false">(</mo><mn>2</mn><mi>n</mi><mo stretchy="false">!</mo><mo stretchy="false">)</mo></mrow><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mo stretchy="false">!</mo><mi>n</mi><mo stretchy="false">!</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{(2n!)}{(n+1)!n!}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.53em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span><span class="mclose mtight">!</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">!</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.485em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">2</span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">!</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> n 为总数</p> <p>那么，输入序列的任一排列，如何判断其是否为栈混洗？</p> <p>任意三个元素能否按照某种次序出现在栈混洗中，与其他元素无关（观察 123 序列得出</p> <p>输入：123 - 栈混洗没有：312</p> <p>对于任何<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><mo>=</mo><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo>&lt;</mo><mi>k</mi><mo>&lt;</mo><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">1&lt;=i&lt;j&lt;k&lt;=n</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73354em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> , <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>k</mi><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>i</mi><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[... , k , ... i, ... , j]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span> 必不是栈混洗</p> <p>这也是判断序列是否为栈混洗的充分必要条件<br>
如此，可以有一种枚举所有这种排列<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^3)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 算法</p> <p>对于任意<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>&lt;</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i&lt;j</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.69862em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>，不含模式<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>j</mi><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[...,j+1,...,i,....j,....]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span><span class="mclose">]</span></span></span></span> 也可以判断<br> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 的时间复杂度</p> <p>引入三个栈，模拟栈混洗过程，不能从 A 通过 S 全部转入 B 时就不是栈混洗，<br>
便得到线性时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 复杂度的算法</p> <ul><li>每次 S.pop () 之前，检测 S 是否已经空，或需要弹出的元素在 S 中，却非顶元素则不是栈混洗</li> <li>过程类似于括号匹配</li></ul> <h3 id="中缀表达式求值"><a href="#中缀表达式求值" class="header-anchor">#</a> 中缀表达式求值</h3> <p>栈结构应用：延迟缓冲 的实例</p> <p>Linux 中: echo<br>
windows 中:set /a<br>
 输入一个语法正确的表达式，回车后就可以得到相应的结果</p> <p>计算器直接输入表达式，等号出结果</p> <p>因为从前到后进行遍历的时候，并不能确定哪个运算符是可以提前计算滴得到结果的<br>
存在延迟缓冲的过程，而不是从前到后依次执行运算符就可以得到正确结果的一个过程</p> <p>所以就可以很好的利用栈结构来实现<br>
求值算法 = 两个栈 + 线性扫描</p> <p>实现:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">float</span> <span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> S<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">&amp;</span> RPN<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//中缀表达式求值</span>
    Stack<span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span> number<span class="token punctuation">;</span>
    Stack<span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">&gt;</span> Operator<span class="token punctuation">;</span>        <span class="token comment">//运算数栈，运算符栈</span>
    Operator<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'\0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">//尾哨兵'\0'也作为头哨兵首先入栈</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>Operator<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//逐个字符处理，直至栈空</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_dight</span><span class="token punctuation">(</span><span class="token operator">*</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment">//若当前字符为操作数，则</span>
            <span class="token function">readNumber</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//完整读入（可能多位的）操作数</span>
        <span class="token keyword">else</span>  <span class="token comment">//若当前字符为运算符，则视其与栈顶运算符之间优先级的高低</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token function">orderBetween</span><span class="token punctuation">(</span>Operator<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 分别处理 <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>                     <span class="token comment">// while</span>
    <span class="token keyword">return</span> number<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//弹出并返回最后的计算结果</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img alt="2020-11-29-18-06-52" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-11-29-18-06-52.jpg" loading="lazy" class="lazy"></p> <p>不同优先级的处理方法:</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">switch</span><span class="token punctuation">(</span><span class="token function">order_Between</span><span class="token punctuation">(</span><span class="token keyword">operator</span><span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>S<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string">'&lt;'</span><span class="token operator">:</span>  <span class="token comment">//栈顶优先级更低</span>
        <span class="token keyword">operator</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">*</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span>
        S<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">//推入运算符栈中，转到表达式的下一个</span>
    <span class="token keyword">case</span> <span class="token string">'='</span><span class="token operator">:</span>   <span class="token comment">//（和）  '\0'</span>
        <span class="token keyword">operator</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        S<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token comment">//弹出栈顶运算符，然后跳过当前字符转向下一字符</span>
    <span class="token keyword">case</span> <span class="token string">'&gt;'</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token comment">//*和+</span>
        <span class="token keyword">char</span> op <span class="token operator">=</span> <span class="token keyword">operator</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'!'</span> <span class="token operator">==</span> op<span class="token punctuation">)</span>
            number<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">calculate</span><span class="token punctuation">(</span>op<span class="token punctuation">,</span> number<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//一元运算符</span>
        <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">float</span> pOpnd2 <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pOpnd1 <span class="token operator">=</span> number<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//弹出两个运算数</span>
            number<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">calculate</span><span class="token punctuation">(</span>pOpnd1<span class="token punctuation">,</span> op<span class="token punctuation">,</span> pOpnd2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//实施结果入栈</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><img alt="2020-11-29-18-12-12" data-src="https://raw.githubusercontent.com/fengwei2002/Pictures_02/master/img/2020-11-29-18-12-12.jpg" loading="lazy" class="lazy"></p> <h3 id="逆波兰表达式-rpn"><a href="#逆波兰表达式-rpn" class="header-anchor">#</a> 逆波兰表达式 RPN</h3> <p>之前的表达式解法：定义混乱，逻辑复杂，验证调试不易</p> <p>RPN:<a href="https://zh.wikipedia.org/wiki/%E6%89%AC%C2%B7%E5%8D%A2%E5%8D%A1%E8%A5%BF%E7%BB%B4%E8%8C%A8" target="_blank" rel="noopener noreferrer"> 数理逻辑学家 Jan Łukasiewicz<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 操作符谁先出现谁先计算</p> <p>在运算符和操作数组成的表达式中，不使用括号，即可表示带优先级的运算关系，操作时只需要一个辅助操作栈</p> <p>手工转换法:（普通中缀表达式到逆波兰表达式 RPN）</p> <ol><li>用括号显示的表示每个操作符的优先级 <code>(</code> ，每对括号都对应一个操作符</li> <li>将括号相对应的运算符移动到对应的右括号后面（未必都仍然保持原来的相对次序）</li> <li>抹去所有括号 （这样就只剩下操作数和操作符组成的逆波兰表达式，操作数仍然保持原来的相对次序）</li> <li>移动后所有操作数的次序 和中缀表达式的次序不变，操作符的次序未必不变</li></ol> <p>实现:infix 到 postfix</p> <p>中缀表达式求值的过程中，捎带着完成了 RPN 的转换和生成</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">float</span> <span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> S<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token operator">&amp;</span> RPN<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// RPN 转换</span>
    <span class="token comment">/*.....................*/</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>optr<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//逐个处理各个字符，直至全空</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_dight</span><span class="token punctuation">(</span><span class="token operator">*</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//若当前字符为操作数 ,</span>
            <span class="token function">read_number</span><span class="token punctuation">(</span>S<span class="token punctuation">,</span> opnd<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">append</span><span class="token punctuation">(</span>RPN<span class="token punctuation">,</span> opnd<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//通过 read number</span>
                                      <span class="token comment">//将操作数读入栈中。然后加入 RPN 尾部</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">//若当前字符为运算符</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token function">order_between</span><span class="token punctuation">(</span>optr<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span>S<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">/*………………………………………………………………*/</span>
                <span class="token keyword">case</span> <span class="token string">'&gt;'</span><span class="token operator">:</span>  <span class="token comment">//栈顶可以立即执行时</span>
                    <span class="token keyword">char</span> op <span class="token operator">=</span> optr<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">append</span><span class="token punctuation">(</span>RPN<span class="token punctuation">,</span> op<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//接入 RPN</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>  <span class="token comment">// case '&gt;'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/*………………………………………………………………*/</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="队列"><a href="#队列" class="header-anchor">#</a> 队列</h2> <p>与栈结构对称的一个数据结构，<br>
因为以后队列在图中和其他算法中还会有广泛应用，所以只先介绍接口的实现</p> <p>机场排好的队伍 First In First Out<br>
 像羽毛球桶，一端只能出，一端只能进</p> <p>只能在队尾插入（查询）enqueue（队尾插入一个元素） + rear ()<br>
 只能在对头删除（查询）dequeue（取出队首的一个元素） + front（查询首元素）<br>
size 接口得到当前队列规模</p> <h3 id="模板类"><a href="#模板类" class="header-anchor">#</a> 模板类</h3> <p>因为也是一种特殊的序列，所以基于向量或列表派生</p> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token keyword">template</span> <span class="token operator">&lt;</span><span class="token keyword">typename</span> T<span class="token operator">&gt;</span>
<span class="token keyword">class</span> <span class="token class-name">Queue</span> <span class="token operator">:</span> <span class="token keyword">public</span> List<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">public</span><span class="token operator">:</span>  <span class="token comment">// size() 与 empty 直接沿用</span>
    <span class="token keyword">void</span> <span class="token function">enqueue</span><span class="token punctuation">(</span>T <span class="token keyword">const</span><span class="token operator">&amp;</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">insert_as_last</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>  <span class="token comment">//入队</span>
    T <span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>          <span class="token comment">//出队</span>
    T<span class="token operator">&amp;</span> <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span>data<span class="token punctuation">;</span> <span class="token punctuation">}</span>             <span class="token comment">//队首</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>所以使用之前开发的模板实现需求，可以又安全又快速 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(1)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span> 完成</p> <p>代码复用</p></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      Created : 2020-11-26
    </span> <span class="update-date" data-v-4e23451f>
      Updated : 2021-03-17
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2020/11/20/_10-size-type-size-t.html" class="post-link" data-v-4e23451f>
      Previous Post : sizetype &amp;sizet
    </a> <a href="/posts/2020/11/27/_08-%E5%85%A8%E6%8E%92%E5%88%97.html" class="post-link" data-v-4e23451f>
      Next Post : 全排列
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" style="background-size:cover;background-repeat:no-repeat;background-position:center;background-attachment:scroll;background-image:url(https://linbudu.top/assets/img/jp-valery-734900-unsplash.jpg);" data-v-9d847660><img src="https://i.loli.net/2021/02/21/zQ8rWE29aOKJD3q.jpg" alt="konng" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      konng
    </section> <section class="info-desc" data-v-9d847660>Design is Persistent Trying.</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="Tai'Yuan, Shan'Xi, China" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Tai'Yuan, Shan'Xi, China</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Tai'Yuan, Shan'Xi, China
        </span></span></section> <section data-v-9d847660><span title="Shan'Xi University" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Shan'Xi University</title><use xlink:href="#icon-organization" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Shan'Xi University
        </span></span></section> <section data-v-9d847660><a href="mailto:konng_0120@qq.com" title="konng_0120@qq.com" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>konng_0120@qq.com</title><use xlink:href="#icon-email" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          konng_0120@qq.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-9d847660><section class="info-sns clearfix" data-v-9d847660><a href="https://github.com/fengwei2002" target="_blank" class="sns-link" data-v-9d847660><span title="GitHub: fengwei2002" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>GitHub: fengwei2002</title><use xlink:href="#icon-github" data-v-9d847660 data-v-9d847660></use></svg></span></a><a href="https://www.zhihu.com/people/e2df61ca5f33cb1e72e27be2cefd18ba" target="_blank" class="sns-link" data-v-9d847660><span title="知乎: kycu" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>知乎: kycu</title><use xlink:href="#icon-zhihu" data-v-9d847660 data-v-9d847660></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>Table of Contents</span> <div class="post-nav-toc"><ul><li><a href="/posts/2020/11/26/_04-stack-queue.html#栈接口与实现">栈接口与实现</a></li><li><a href="/posts/2020/11/26/_04-stack-queue.html#栈结构的典型应用">栈结构的典型应用</a><ul><li><a href="/posts/2020/11/26/_04-stack-queue.html#进制转换">进制转换</a></li><li><a href="/posts/2020/11/26/_04-stack-queue.html#括号匹配">括号匹配</a></li><li><a href="/posts/2020/11/26/_04-stack-queue.html#栈混洗">栈混洗</a></li><li><a href="/posts/2020/11/26/_04-stack-queue.html#中缀表达式求值">中缀表达式求值</a></li><li><a href="/posts/2020/11/26/_04-stack-queue.html#逆波兰表达式-rpn">逆波兰表达式 RPN</a></li></ul></li><li><a href="/posts/2020/11/26/_04-stack-queue.html#队列">队列</a><ul><li><a href="/posts/2020/11/26/_04-stack-queue.html#模板类">模板类</a></li></ul></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/posts/2020/11/26/_04-stack-queue.html#post-comments">
      Comments
    </a></div></div></aside></div> <footer class="footer" data-v-1375e54c><p class="footer-sns-links" data-v-1375e54c><a href="https://github.com/fengwei2002" target="_blank" class="sns-link" data-v-1375e54c><span title="GitHub: fengwei2002" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>GitHub: fengwei2002</title><use xlink:href="#icon-github" data-v-1375e54c data-v-1375e54c></use></svg></span></a><a href="https://www.zhihu.com/people/e2df61ca5f33cb1e72e27be2cefd18ba" target="_blank" class="sns-link" data-v-1375e54c><span title="知乎: kycu" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>知乎: kycu</title><use xlink:href="#icon-zhihu" data-v-1375e54c data-v-1375e54c></use></svg></span></a></p> <!----> <!----></footer></div><div class="global-ui"><!----><!----><APlayer audio="" fixed="true" theme="#b7daff" loop="loop" order="list" preload="auto" volume="0.7" mutex="true" lrc-type="3" list-max-height="250" storage-name="vuepress-plugin-meting" id="aplayer-fixed"></APlayer><div id="goTop" class="hide-cat" data-v-bf92849a></div><!----><canvas id="vuepress-canvas-cursor"></canvas><!----></div></div>
    <script src="/assets/js/app.dd7f87c0.js" defer></script><script src="/assets/js/9.31128199.js" defer></script><script src="/assets/js/66.81138f05.js" defer></script><script src="/assets/js/7.d59aec22.js" defer></script>
  </body>
</html>
